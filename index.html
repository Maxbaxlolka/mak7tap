<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mak7Tap</title>
  <script src="https://unpkg.com/@tonconnect/sdk@latest/dist/tonconnect-sdk.min.js"></script>
  <style>
    /* ======== Общий стиль ======== */
    body {
      margin: 0;
      height: 100vh;
      background: radial-gradient(ellipse at center, #fdfdfd 0%, #dcdcdc 100%);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      font-family: "Poppins", sans-serif;
      color: #000;
      overflow: hidden;
      position: relative;
    }

    /* ======== Верхняя кнопка "КОШЕЛЁК" ======== */
    .wallet-btn {
      margin-top: 20px;
      padding: 8px 24px;
      font-size: 1rem;
      font-weight: 700;
      background: #fff;
      color: #000;
      border: 2px solid #000;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15), inset 0 2px 3px rgba(255, 255, 255, 0.5);
      cursor: pointer;
      transition: all 0.15s ease;
      max-width: 200px;
      text-overflow: ellipsis;
      white-space: nowrap;
      overflow: hidden;
    }

    .wallet-btn:hover {
      background: #f5f5f5;
      box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2), inset 0 2px 3px rgba(255, 255, 255, 0.6);
    }

    .wallet-btn:active {
      transform: scale(0.97);
      background: #eee;
      box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.25);
    }

    /* ======== Центральный блок ======== */
    .center-block {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      flex-grow: 1;
    }

    /* ======== Буква M ======== */
    .letter {
      font-size: 120px;
      font-weight: 800;
      color: #000;
      text-shadow: 2px 2px 0 #ccc, 4px 4px 0 #888;
      transform: rotateY(15deg);
      cursor: pointer;
      user-select: none;
      transition: transform 0.1s ease, text-shadow 0.1s ease;
      margin-bottom: 10px;
    }

    .letter:active {
      transform: rotateY(5deg) scale(0.95);
      text-shadow: 1px 1px 0 #aaa;
    }

    /* ======== Счётчик ======== */
    .counter {
      font-size: 2rem;
      font-weight: 700;
      color: #000;
      text-shadow:
        0 1px 0 #ccc,
        0 2px 0 #bbb,
        0 3px 0 #aaa,
        0 4px 0 #999,
        0 5px 0 #888,
        0 6px 1px rgba(0, 0, 0, 0.2),
        0 0 5px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s ease;
    }

    .counter.bump {
      transform: scale(1.3);
    }

    /* ======== Нижняя кнопка "БАБЛО" ======== */
    .money-btn {
      margin-bottom: 40px;
      padding: 10px 30px;
      font-size: 1rem;
      font-weight: 700;
      background: #000;
      color: #fff;
      border: 2px solid #000;
      border-radius: 10px;
      box-shadow:
        inset 0 3px 4px rgba(255, 255, 255, 0.4),
        inset 0 -3px 5px rgba(0, 0, 0, 0.3),
        0 4px 10px rgba(0, 0, 0, 0.25);
      cursor: pointer;
      transition: all 0.15s ease;
    }

    .money-btn:hover {
      background: #111;
      box-shadow:
        inset 0 4px 6px rgba(255, 255, 255, 0.45),
        inset 0 -4px 6px rgba(0, 0, 0, 0.35),
        0 6px 12px rgba(0, 0, 0, 0.3);
    }

    .money-btn:active {
      transform: scale(0.96);
      box-shadow:
        inset 0 3px 4px rgba(255, 255, 255, 0.3),
        inset 0 -3px 4px rgba(0, 0, 0, 0.4),
        0 3px 6px rgba(0, 0, 0, 0.2);
      background: #222;
    }

    /* ======== Окно заданий ======== */
    .tasks-window {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #fff;
      border: 2px solid #000;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
      text-align: center;
      z-index: 10;
      width: 260px;
    }

    .task-btn {
      display: block;
      width: 100%;
      margin: 10px 0;
      padding: 10px;
      font-weight: 600;
      border: 2px solid #000;
      border-radius: 8px;
      cursor: pointer;
      background: #f5f5f5;
      transition: all 0.15s ease;
    }

    .task-btn:hover {
      background: #e0e0e0;
    }

    .close-btn {
      margin-top: 10px;
      background: #000;
      color: #fff;
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- ======== Верхняя кнопка "КОШЕЛЁК" ======== -->
  <button class="wallet-btn" id="walletBtn">КОШЕЛЁК</button>

  <!-- ======== Центральный блок ======== -->
  <div class="center-block">
    <div class="letter" id="tapBtn">M</div>
    <div class="counter" id="counter">0</div>
  </div>

  <!-- ======== КНОПКА "БАБЛО" ======== -->
  <button class="money-btn" id="moneyBtn">БАБЛО</button>

  <!-- ======== ОКНО С ЗАДАНИЯМИ ======== -->
  <div class="tasks-window" id="tasksWindow" style="display: none;">
    <h2>Задания</h2>
    <button class="task-btn" onclick="window.open('https://www.youtube.com/@mak7ikYT', '_blank')">ПОДПИСАТЬСЯ НА КАНАЛ</button>
    <button class="task-btn" onclick="window.open('https://www.tiktok.com/@mak7iktv', '_blank')">ПОДПИСАТЬСЯ НА ТИК-ТОК</button>
    <button class="task-btn" onclick="window.open('https://www.instagram.com/mak7lk_22/', '_blank')">ПОДПИСАТЬСЯ НА ИНСТУ</button>
    <button class="close-btn" onclick="document.getElementById('tasksWindow').style.display='none'">Закрыть</button>
  </div>

  <script>
    // ======== Логика счётчика ========
    let score = parseInt(localStorage.getItem('mak7tap_score')) || 0;
    const btn = document.getElementById('tapBtn');
    const counter = document.getElementById('counter');

    counter.textContent = score;

    btn.addEventListener('click', () => {
      score++;
      counter.textContent = score;
      localStorage.setItem('mak7tap_score', score);
      counter.classList.add('bump');
      setTimeout(() => counter.classList.remove('bump'), 150);
    });

    // ======== Кнопка БАБЛО ========
    const moneyBtn = document.getElementById('moneyBtn');
    const tasksWindow = document.getElementById('tasksWindow');

    moneyBtn.addEventListener('click', () => {
      tasksWindow.style.display = 'block';
    });

    // ======== TON Connect ========
    const walletBtn = document.getElementById('walletBtn');

    const connector = new TonConnectSDK.TonConnect({
      manifestUrl: 'https://your-domain.com/tonconnect-manifest.json'
    });

    connector.onStatusChange(walletInfo => {
      if (walletInfo && walletInfo.account) {
        const addr = walletInfo.account.address;
        walletBtn.textContent = addr.slice(0, 8) + '...' + addr.slice(-4);
      } else {
        walletBtn.textContent = 'КОШЕЛЁК';
      }
    });

    walletBtn.addEventListener('click', async () => {
      const wallets = await connector.getWallets();
      const wallet = wallets[0];
      await connector.connect({
        universalLink: wallet.universalLink,
        bridgeUrl: wallet.bridgeUrl
      });
    });
  </script>
</body>
</html>
