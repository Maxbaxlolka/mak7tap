<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mak7Tap</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: radial-gradient(circle at center, #fdfdfd 0%, #dcdcdc 100%);
    color: #000;
  }
  #counter {
    font-size: 3rem;
    margin: 20px;
  }
  button {
    font-size: 1.2rem;
    margin: 10px;
    padding: 10px 20px;
    border-radius: 10px;
    border: 2px solid #000;
    cursor: pointer;
  }
  .tasks button {
    display: block;
    width: 200px;
    margin: 5px auto;
  }
</style>
</head>
<body>

<h1>Mak7Tap</h1>
<div id="counter">0</div>
<button id="tapBtn">M (Тап)</button>
<button id="tasksBtn">БАБЛО (Задания)</button>

<div class="tasks" id="tasksWindow" style="display:none;">
  <button onclick="window.open('https://www.youtube.com/@mak7ikYT', '_blank')">Подписаться на YouTube</button>
  <button onclick="window.open('https://www.tiktok.com/@mak7iktv', '_blank')">Подписаться на TikTok</button>
  <button onclick="window.open('https://www.instagram.com/mak7lk_22/', '_blank')">Подписаться на Instagram</button>
  <button onclick="document.getElementById('tasksWindow').style.display='none'">Закрыть</button>
</div>

<!-- Telegram Web App API -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script>
  // ======== Инициализация Telegram Web App ========
  const tg = window.Telegram.WebApp;
  tg.expand(); // развернуть игру на весь экран
  tg.ready();

  // ======== Локальное хранилище очков ========
  let score = parseInt(localStorage.getItem('mak7tap_score')) || 0;
  const counter = document.getElementById('counter');
  const tapBtn = document.getElementById('tapBtn');
  const tasksBtn = document.getElementById('tasksBtn');
  const tasksWindow = document.getElementById('tasksWindow');

  counter.textContent = score;

  tapBtn.addEventListener('click', () => {
    score++;
    counter.textContent = score;
    localStorage.setItem('mak7tap_score', score);

    // Отправляем очки в Telegram
    tg.sendData(JSON.stringify({score: score}));
  });

  tasksBtn.addEventListener('click', () => {
    tasksWindow.style.display = 'block';
  });
</script>

</body>
</html>
